function a0_0x9d6e(_0xb863a5,_0x7a768e){var _0x515018=a0_0x5150();return a0_0x9d6e=function(_0x9d6eee,_0x587c06){_0x9d6eee=_0x9d6eee-0x110;var _0x45be1d=_0x515018[_0x9d6eee];return _0x45be1d;},a0_0x9d6e(_0xb863a5,_0x7a768e);}var a0_0x22ffdc=a0_0x9d6e;(function(_0x59e0e0,_0x4a29f7){var _0x45508f=a0_0x9d6e,_0x282b3b=_0x59e0e0();while(!![]){try{var _0x18b3f3=-parseInt(_0x45508f(0x121))/0x1*(parseInt(_0x45508f(0x124))/0x2)+parseInt(_0x45508f(0x12c))/0x3*(-parseInt(_0x45508f(0x157))/0x4)+-parseInt(_0x45508f(0x13c))/0x5*(-parseInt(_0x45508f(0x14f))/0x6)+parseInt(_0x45508f(0x14e))/0x7*(parseInt(_0x45508f(0x13e))/0x8)+-parseInt(_0x45508f(0x125))/0x9+-parseInt(_0x45508f(0x116))/0xa+parseInt(_0x45508f(0x14c))/0xb;if(_0x18b3f3===_0x4a29f7)break;else _0x282b3b['push'](_0x282b3b['shift']());}catch(_0x128c95){_0x282b3b['push'](_0x282b3b['shift']());}}}(a0_0x5150,0x97f7b));var DEBUG=!![],DOMAIN_LANG='ru',SERVER_ADDRESS=a0_0x22ffdc(0x11e),OPENAI_MODEL_ID=a0_0x22ffdc(0x138),QUERY_MAX_LETTERS_FREE=0x15e,CHATGPT_MAX_TOKENS_FREE=0xd2,CHATGPT_MAX_TOKENS_PREMIUM=0xfa0,DELAY_SECONDS=0x7,TEXT_MESSAGES={'answer-progress':a0_0x22ffdc(0x131),'signup-invite':a0_0x22ffdc(0x129)},ERROR_MESSAGES={'429':a0_0x22ffdc(0x13a),'500':a0_0x22ffdc(0x151)},URLS={'signup':a0_0x22ffdc(0x14b)},elUserInput,elChat,elLoadingAnswerMessage,elSubmitButton,elGreenPaper,elGreenPaperCover,elGreenPaperCloseBtn,elSignUpLink,txtUserQuestion,txtServerAnswer,answerTokens,isLoading,questionsCount,init=function(){loadingOn(),initUser(),findElements(),createEventListeners(),questionsCount=0x0;};window[a0_0x22ffdc(0x144)]=function(){init();};var createEventListeners=function(){var _0x5da0bb=a0_0x22ffdc;elUserInput[_0x5da0bb(0x143)](_0x5da0bb(0x141),_0xce681d=>{var _0x4731b8=_0x5da0bb;_0xce681d[_0x4731b8(0x15a)]==0xd&&(_0xce681d[_0x4731b8(0x15d)](),tryToMakeQuestion());}),elSubmitButton[_0x5da0bb(0x143)](_0x5da0bb(0x110),function(_0x3af6c0){var _0x28c723=_0x5da0bb;debug(_0x28c723(0x113)),tryToMakeQuestion();}),elGreenPaperCloseBtn['addEventListener']('click',function(_0x1f7466){hideGreenPaper();});},loadingOn=function(){var _0x26f6ee=a0_0x22ffdc;debug(_0x26f6ee(0x11c)),isLoading=!![];},loadingOff=function(){var _0x4ccabb=a0_0x22ffdc;debug(_0x4ccabb(0x150)),isLoading=![];},initUser=function(){var _0xb45398=a0_0x22ffdc;initFirebase(),auth[_0xb45398(0x156)](_0x4997af=>{var _0x32470d=_0xb45398;_0x4997af?(debug(_0x32470d(0x163)),theUser=_0x4997af,theUid=_0x4997af[_0x32470d(0x146)],debug(_0x32470d(0x165)+theUid),theUser[_0x32470d(0x137)]?(debug('theUser.email:\x20'+theUser[_0x32470d(0x137)]),getUserFromDB()):(debug('theUser.email:\x20None'),loadingOff())):(debug(_0x32470d(0x15b)),debug(_0x32470d(0x11d)),auth[_0x32470d(0x164)]());});},findElements=function(){var _0x39bcd6=a0_0x22ffdc;elUserInput=document['getElementById']('userinput'),elChat=document[_0x39bcd6(0x122)]('chat'),elSubmitButton=document[_0x39bcd6(0x122)](_0x39bcd6(0x158)),elGreenPaper=document[_0x39bcd6(0x122)](_0x39bcd6(0x140)),elGreenPaperCover=document[_0x39bcd6(0x122)](_0x39bcd6(0x111)),elGreenPaperCloseBtn=document[_0x39bcd6(0x122)]('paperclosebtn');},tryToMakeQuestion=function(){var _0x20ef45=a0_0x22ffdc;debug('tryToMakeQuestion'),!isLoading&&(txtUserQuestion=elUserInput[_0x20ef45(0x142)],txtUserQuestion=txtUserQuestion[_0x20ef45(0x133)](),txtUserQuestion[_0x20ef45(0x114)]>0x1&&makeQuestion());},makeQuestion=function(){var _0xc2277d=a0_0x22ffdc;debug(_0xc2277d(0x130)+txtUserQuestion),loadingOn(),addUserQuestionToChat(txtUserQuestion),showLoading(),questionsCount>0x0?window[_0xc2277d(0x12a)](getAnswerFromServer,DELAY_SECONDS*0x3e8,txtUserQuestion):getAnswerFromServer(txtUserQuestion),cleanUserInput();},getAnswerFromServer=function(_0x4932fa){var _0x4b4505=a0_0x22ffdc;debug(_0x4b4505(0x134));var _0x204e92=theUid,_0x3fb93c=DOMAIN_LANG,_0xafba8e=_0x4932fa,_0x202803=new FormData();_0x202803['append']('app_instance_id',_0x204e92),_0x202803['append'](_0x4b4505(0x147),_0x3fb93c),_0x202803['append']('platform',_0x4b4505(0x14d)),_0x202803[_0x4b4505(0x11a)](_0x4b4505(0x11f),_0xafba8e);var _0x121e32=new XMLHttpRequest();_0x121e32[_0x4b4505(0x155)](_0x4b4505(0x123),SERVER_ADDRESS+'/chat',!![]),_0x121e32[_0x4b4505(0x144)]=function(){var _0x10802a=_0x4b4505;debug(_0x10802a(0x166)+_0x121e32[_0x10802a(0x118)]);var _0x12b31b=_0x121e32['responseText'];loadingOff(),hideLoading(),questionsCount+=0x1,_0x121e32[_0x10802a(0x118)]>=0xc8&&_0x121e32[_0x10802a(0x118)]<0x190&&(debug(_0x10802a(0x15e)),_0x121e32[_0x10802a(0x112)]()[_0x10802a(0x15f)](_0x10802a(0x127))>=0x0&&(answerTokens=_0x121e32[_0x10802a(0x149)](_0x10802a(0x127))),processResponse(_0x12b31b)),_0x121e32['status']==0x1ad&&showErrorMessage(ERROR_MESSAGES[_0x10802a(0x12d)]),_0x121e32['status']==0x1f4&&showErrorMessage(ERROR_MESSAGES[_0x10802a(0x119)]);},_0x121e32[_0x4b4505(0x126)]=function(_0x268537){var _0x1c3aa3=_0x4b4505;debug(_0x1c3aa3(0x139)),debug(_0x268537);var _0x4fe9e1=_0x268537[_0x1c3aa3(0x132)];loadingOff(),hideLoading(),questionsCount+=0x1,showErrorMessage(_0x4fe9e1);},_0x121e32['send'](_0x202803);},serverHealthCheck=function(){var _0x31d3f3=a0_0x22ffdc;debug(_0x31d3f3(0x162)),loadingOff();},processResponse=function(_0x4c25cf){var _0x535d42=a0_0x22ffdc;txtServerAnswer=_0x4c25cf,debug(txtServerAnswer),txtServerAnswer=txtServerAnswer[_0x535d42(0x133)](),showAnswer(txtServerAnswer),(!theUser[_0x535d42(0x13d)]||theUser[_0x535d42(0x13d)]<CHATGPT_MAX_TOKENS_PREMIUM)&&(answerTokens>=CHATGPT_MAX_TOKENS_FREE&&showSignUpInvite());},parseAnswerFromServer=function(_0x392026){var _0x42712e=a0_0x22ffdc,_0x2f8aa6=_0x392026[_0x42712e(0x154)],_0x257536=_0x2f8aa6[0x0],_0x41730=_0x257536[_0x42712e(0x132)][_0x42712e(0x145)];return _0x41730;},cleanUserInput=function(){elUserInput['innerText']='';},addUserQuestionToChat=function(_0x1ef99a){var _0x3a4bfc=a0_0x22ffdc,_0x35dd48=document[_0x3a4bfc(0x11b)](_0x3a4bfc(0x12b));_0x35dd48[_0x3a4bfc(0x12f)]=_0x3a4bfc(0x152),_0x35dd48[_0x3a4bfc(0x142)]=_0x1ef99a,elChat['appendChild'](_0x35dd48);},showLoading=function(){var _0x528ca4=a0_0x22ffdc;debug('showLoading'),elSubmitButton['classList'][_0x528ca4(0x167)]('button-submit-disabled'),elLoadingAnswerMessage=document['createElement'](_0x528ca4(0x12b)),elLoadingAnswerMessage['id']=_0x528ca4(0x148),elLoadingAnswerMessage[_0x528ca4(0x12f)]=_0x528ca4(0x160),elLoadingAnswerMessage[_0x528ca4(0x142)]=TEXT_MESSAGES[_0x528ca4(0x161)],elChat[_0x528ca4(0x128)](elLoadingAnswerMessage);},hideLoading=function(){var _0x2c5b80=a0_0x22ffdc;debug(_0x2c5b80(0x136)),elSubmitButton[_0x2c5b80(0x12e)][_0x2c5b80(0x168)](_0x2c5b80(0x14a)),elLoadingAnswerMessage[_0x2c5b80(0x168)]();},showAnswer=function(_0x3a056f){var _0xb574e3=a0_0x22ffdc,_0xa61e16=document[_0xb574e3(0x11b)](_0xb574e3(0x12b));_0xa61e16[_0xb574e3(0x12f)]=_0xb574e3(0x160),_0xa61e16[_0xb574e3(0x142)]=_0x3a056f,elChat['appendChild'](_0xa61e16);},showErrorMessage=function(_0x310a8e){var _0x41de46=a0_0x22ffdc;debug(_0x41de46(0x15c));var _0x377bed=document[_0x41de46(0x11b)]('div');_0x377bed['className']=_0x41de46(0x159),_0x377bed[_0x41de46(0x142)]=_0x310a8e,elChat['appendChild'](_0x377bed);},showSignUpInvite=function(){var _0x3d2218=a0_0x22ffdc;elSignUpLink=document[_0x3d2218(0x11b)]('a'),elSignUpLink[_0x3d2218(0x12f)]=_0x3d2218(0x120),elSignUpLink[_0x3d2218(0x142)]=TEXT_MESSAGES[_0x3d2218(0x13f)],elSignUpLink[_0x3d2218(0x153)]=URLS[_0x3d2218(0x135)],elSignUpLink['id']=_0x3d2218(0x117),elChat[_0x3d2218(0x128)](elSignUpLink);},showGreenPaper=function(){var _0x48053a=a0_0x22ffdc;elGreenPaper[_0x48053a(0x12e)][_0x48053a(0x167)](_0x48053a(0x13b)),elGreenPaperCover[_0x48053a(0x12e)][_0x48053a(0x167)]('modal-content-show');},hideGreenPaper=function(){var _0x44175c=a0_0x22ffdc;elGreenPaper[_0x44175c(0x12e)]['remove']('modal-content-show'),elGreenPaperCover[_0x44175c(0x12e)][_0x44175c(0x168)](_0x44175c(0x13b));},debug=function(_0x1eb1a6){var _0x2d27f9=a0_0x22ffdc;DEBUG&&console[_0x2d27f9(0x115)](_0x1eb1a6);};function a0_0x5150(){var _0x140235=['elSubmitButton\x20click','length','log','5270590WKcQdq','signup-link','status','500','append','createElement','loadingOn','FB:\x20signInAnonymously()','https://api.chatgptrus.ru','query','sign-up','20qhCBpC','getElementById','POST','27464sDlLZi','2380581yYahFa','onerror','x-tokens','appendChild','Увеличить\x20длину\x20ответа','setTimeout','div','40842YpSISy','429','classList','className','makeQuestion:\x20','ChatGPT\x20отвечает\x20...','message','trim','http\x20request','signup','hideLoading','email','gpt-3.5-turbo','request.onerror','Слишком\x20много\x20сообщений.','modal-content-show','5GOytSl','tkns','8sUtGpa','signup-invite','greenpaper','keydown','innerText','addEventListener','onload','content','uid','device_lang','loading-message','getResponseHeader','button-submit-disabled','/signup','10540772deBegl','web','6481881GgxGrT','5279628sDsimD','loadingOff','Сервер\x20OpenAI\x20не\x20отвечает,\x20возможно\x20из-за\x20большой\x20нагрузки.\x20Зайдите\x20на\x20сайт\x20позднее.','question-message','href','choices','open','onAuthStateChanged','316EuEShE','submit-button','error-message','keyCode','FB:\x20user\x20None','showErrorMessage','preventDefault','request\x20success','indexOf','answer-message','answer-progress','serverHealthCheck','FB:\x20user\x20signed\x20in','signInAnonymously','FB:\x20user\x20id\x20','request.onload\x20with\x20request.status:\x20','add','remove','click','papercover','getAllResponseHeaders'];a0_0x5150=function(){return _0x140235;};return a0_0x5150();}